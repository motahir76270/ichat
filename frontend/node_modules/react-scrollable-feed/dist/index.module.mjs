import*as t from"react";function e(t,o){return e=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},e(t,o)}var o=/*#__PURE__*/function(o){function r(e){var r;return(r=o.call(this,e)||this).wrapperRef=void 0,r.bottomRef=void 0,r.bottomRef=/*#__PURE__*/t.createRef(),r.wrapperRef=/*#__PURE__*/t.createRef(),r.handleScroll=r.handleScroll.bind(r),r.props.debug&&console.log("Component cstr"),r}var n,i;i=o,(n=r).prototype=Object.create(i.prototype),n.prototype.constructor=n,e(n,i);var c=r.prototype;return c.getSnapshotBeforeUpdate=function(){return this.props.debug&&console.log("Component ",this.getSnapshotBeforeUpdate.name),!(!this.wrapperRef.current||!this.bottomRef.current)&&r.isViewable(this.wrapperRef.current,this.bottomRef.current,this.props.viewableDetectionEpsilon)},c.componentDidUpdate=function(t,e,o){this.props.debug&&console.log("Component ",this.componentDidUpdate.name);var r=this.props,n=r.forceScroll;(0,r.changeDetectionFilter)(t,this.props)&&(n||o)&&this.bottomRef.current&&this.wrapperRef.current&&this.scrollParentToChild(this.wrapperRef.current,this.bottomRef.current)},c.componentDidMount=function(){this.props.debug&&console.log("Component ",this.componentDidMount.name),this.bottomRef.current&&this.wrapperRef.current&&this.scrollParentToChild(this.wrapperRef.current,this.bottomRef.current)},c.scrollParentToChild=function(t,e){if(!r.isViewable(t,e,this.props.viewableDetectionEpsilon)){var o=t.getBoundingClientRect(),n=e.getBoundingClientRect(),i=this.props,c=i.animateScroll,p=i.onScrollComplete;c&&(c(t,n.top+t.scrollTop-o.top),p())}},r.isViewable=function(t,e,o){o=o||0;var r=t.getBoundingClientRect(),n=e.getBoundingClientRect();return n.top>=r.top&&r.top+t.clientHeight-n.top+o>=0},c.handleScroll=function(){var t=this.props,e=t.onScroll;e&&this.bottomRef.current&&this.wrapperRef.current&&e(r.isViewable(this.wrapperRef.current,this.bottomRef.current,t.viewableDetectionEpsilon))},c.scrollToBottom=function(){this.bottomRef.current&&this.wrapperRef.current&&this.scrollParentToChild(this.wrapperRef.current,this.bottomRef.current)},c.render=function(){this.props.debug&&console.log("Component ",this.render.name);var e=this.props;/*#__PURE__*/return t.createElement("div",{className:e.className,style:{maxHeight:"inherit",height:"inherit",overflowY:"auto"},ref:this.wrapperRef,onScroll:this.handleScroll},e.children,/*#__PURE__*/t.createElement("div",{ref:this.bottomRef}))},r}(t.Component);o.defaultProps={forceScroll:!1,animateScroll:function(t,e){t.scrollBy?t.scrollBy({top:e}):t.scrollTop=e},onScrollComplete:function(){},changeDetectionFilter:function(){return!0},viewableDetectionEpsilon:2,onScroll:function(){}};export{o as default};
//# sourceMappingURL=index.module.mjs.map
